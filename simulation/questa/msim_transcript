# Reading pref.tcl
# //  Questa Intel Starter FPGA Edition-64
# //  Version 2021.2 win64 Apr 14 2021
# //
# //  Copyright 1991-2021 Mentor Graphics Corporation
# //  All Rights Reserved.
# //
# //  QuestaSim and its associated documentation contain trade
# //  secrets and commercial or financial information that are the property of
# //  Mentor Graphics Corporation and are privileged, confidential,
# //  and exempt from disclosure under the Freedom of Information Act,
# //  5 U.S.C. Section 552. Furthermore, this information
# //  is prohibited from disclosure under the Trade Secrets Act,
# //  18 U.S.C. Section 1905.
# //
# do rns16_run_msim_rtl_verilog.do
# if {[file exists rtl_work]} {
# 	vdel -lib rtl_work -all
# }
# vlib rtl_work
# vmap work rtl_work
# Questa Intel Starter FPGA Edition-64 vmap 2021.2 Lib Mapping Utility 2021.04 Apr 14 2021
# vmap work rtl_work 
# Copying D:/APPLICATIONS/intelFPGA_lite/22.1std/questa_fse/win64/../modelsim.ini to modelsim.ini
# Modifying modelsim.ini
# 
# vlog -vlog01compat -work work +incdir+H:/PROJETS/FPGA/PROGRAMME16BITS {H:/PROJETS/FPGA/PROGRAMME16BITS/rns16.v}
# Questa Intel Starter FPGA Edition-64 vlog 2021.2 Compiler 2021.04 Apr 14 2021
# Start time: 19:03:12 on Oct 16,2025
# vlog -reportprogress 300 -vlog01compat -work work "+incdir+H:/PROJETS/FPGA/PROGRAMME16BITS" H:/PROJETS/FPGA/PROGRAMME16BITS/rns16.v 
# -- Compiling module rns16
# 
# Top level modules:
# 	rns16
# End time: 19:03:12 on Oct 16,2025, Elapsed time: 0:00:00
# Errors: 0, Warnings: 0
# 
# === Setup projet ===
set ROOT {H:/PROJETS/FPGA/PROGRAMME16BITS}
# H:/PROJETS/FPGA/PROGRAMME16BITS
cd $ROOT
# reading modelsim.ini

vlib work
# ** Warning: (vlib-34) Library already exists at "work".
# Errors: 0, Warnings: 1
vmap work work
# Questa Intel Starter FPGA Edition-64 vmap 2021.2 Lib Mapping Utility 2021.04 Apr 14 2021
# vmap work work 
# Modifying modelsim.ini

# === Compile ===
vlog rns16.v
# Questa Intel Starter FPGA Edition-64 vlog 2021.2 Compiler 2021.04 Apr 14 2021
# Start time: 19:03:24 on Oct 16,2025
# vlog -reportprogress 300 rns16.v 
# -- Compiling module rns16
# 
# Top level modules:
# 	rns16
# End time: 19:03:24 on Oct 16,2025, Elapsed time: 0:00:00
# Errors: 0, Warnings: 0
vlog tb_rns16.v
# Questa Intel Starter FPGA Edition-64 vlog 2021.2 Compiler 2021.04 Apr 14 2021
# Start time: 19:03:24 on Oct 16,2025
# vlog -reportprogress 300 tb_rns16.v 
# -- Compiling module tb_rns16
# 
# Top level modules:
# 	tb_rns16
# End time: 19:03:24 on Oct 16,2025, Elapsed time: 0:00:00
# Errors: 0, Warnings: 0

# === Simu ===
vsim -voptargs=+acc -onfinish stop work.tb_rns16
# vsim -voptargs="+acc" -onfinish stop work.tb_rns16 
# Start time: 19:03:24 on Oct 16,2025
# ** Note: (vsim-3813) Design is being optimized due to module recompilation...
# Loading work.tb_rns16(fast)
# Loading work.rns16(fast)

# === Vue signaux ===
view wave
# .main_pane.wave.interior.cs.body.pw.wf
quietly wave clear
# unknown or ambiguous subcommand "clear": must be activecursor, addcursor, clipboard, collapse, configcursor, create, cursor, cursorconfig, cursortime, deletecursor, edit, editwrite, expand, export, exportvcd, group, guiObjGetUPFInfo, guiObjHasUPFInfo, import, interrupt, map, modify, overlay, pah, positioncursor, refresh, seecursor, seetime, sort, ungroup, write, zoom, zoomcursor, zoomfull, zoomin, zoomlast, zoomout, or zoomrange

# ---- Ports TB (utile pour reset/horloge) ----
add wave -radix unsigned sim:/tb_rns16/clk
add wave                   sim:/tb_rns16/rst_n
add wave -radix unsigned sim:/tb_rns16/in_byte
add wave                   sim:/tb_rns16/in_valid
add wave                   sim:/tb_rns16/out_ready
add wave -radix unsigned sim:/tb_rns16/out_word
add wave                   sim:/tb_rns16/out_valid
add wave                   sim:/tb_rns16/in_ready

# ---- Niveaux DUT (ports) ----
add wave -divider {DUT ports}
add wave -radix unsigned sim:/tb_rns16/dut/in_byte
add wave                   sim:/tb_rns16/dut/in_valid
add wave                   sim:/tb_rns16/dut/in_ready
add wave -radix hex     sim:/tb_rns16/dut/out_word
add wave                   sim:/tb_rns16/dut/out_valid
add wave                   sim:/tb_rns16/dut/out_ready
add wave                   sim:/tb_rns16/dut/clk
add wave                   sim:/tb_rns16/dut/rst_n

# ---- Niveaux DUT (états internes courants) ----
# Ajuste/retire ces lignes selon les noms exacts dans rns16.v
add wave -divider {DUT internals}
add wave -radix hex     sim:/tb_rns16/dut/x0_16
add wave -radix unsigned sim:/tb_rns16/dut/x_lo
add wave -radix unsigned sim:/tb_rns16/dut/x_hi
# ** UI-Msg: (vish-4014) No objects found matching '/tb_rns16/dut/x_hi'.
add wave                   sim:/tb_rns16/dut/have_lo
add wave                   sim:/tb_rns16/dut/v0

# Exemple si tu as des registres RNS/lookup (renomme si besoin)
# add wave -radix unsigned sim:/tb_rns16/dut/r5
# add wave -radix unsigned sim:/tb_rns16/dut/r7
# add wave -radix unsigned sim:/tb_rns16/dut/r9

# Lisibilité
configure wave -signalnamewidth 1
configure wave -timelineunits ns
radix hex  ;# défaut en hexa, on force unsigned au cas par cas ci-dessus
# hexadecimal

run -all
# OK !
# ** Note: $finish    : tb_rns16.v(114)
#    Time: 2621615 ns  Iteration: 1  Instance: /tb_rns16
# Break in Module tb_rns16 at tb_rns16.v line 114
